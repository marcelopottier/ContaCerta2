<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle Financeiro - Categorias</title>
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/categories.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
<div class="overlay" id="overlay"></div>
<div class="loading" id="loading">
    <div class="spinner"></div>
    <p>Carregando categorias...</p>
</div>

<div th:replace="fragments/navbar :: privateNavbar"></div>

<div class="main-container">
    <nav class="sidebar">
        <div class="sidebar-header">
            <h3><i class="fas fa-list"></i> Menu</h3>
        </div>
        <ul class="sidebar-menu">
            <li><a href="/dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
            <li><a href="/transactions"><i class="fas fa-exchange-alt"></i> Movimentações</a></li>
            <li><a href="/categories" class="active"><i class="fas fa-tags"></i> Categorias</a></li>
            <li><a href="/reports"><i class="fas fa-chart-bar"></i> Relatórios</a></li>
        </ul>
    </nav>

    <main class="content">
        <div class="page-header">
            <div class="page-title">
                <h1><i class="fas fa-tags"></i> Gerenciar Categorias</h1>
                <p>Organize suas movimentações financeiras em categorias</p>
            </div>
            <div class="page-actions">
                <button class="btn btn-primary" onclick="openAddModal()">
                    <i class="fas fa-plus"></i>
                    Nova Categoria
                </button>
            </div>
        </div>

        <div class="categories-grid" id="categoriesGrid">
            <!-- Categorias serão carregadas aqui -->
        </div>

        <div class="empty-state" id="emptyState" style="display: none;">
            <div class="empty-icon">
                <i class="fas fa-tags"></i>
            </div>
            <h3>Nenhuma categoria encontrada</h3>
            <p>Crie sua primeira categoria para organizar suas movimentações financeiras</p>
            <button class="btn btn-primary" onclick="openAddModal()">
                <i class="fas fa-plus"></i>
                Criar Primeira Categoria
            </button>
        </div>
    </main>
</div>

<!-- Modal para Adicionar/Editar Categoria -->
<div class="modal" id="categoryModal">
    <div class="modal-backdrop" onclick="closeModal()"></div>
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="modalTitle">
                <i class="fas fa-tag"></i>
                Nova Categoria
            </h3>
            <button class="modal-close" onclick="closeModal()">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <form id="categoryForm" class="modal-body">
            <input type="hidden" id="categoryId">

            <div class="form-group">
                <label for="categoryName">
                    <i class="fas fa-tag"></i>
                    Nome da Categoria
                </label>
                <input type="text" id="categoryName" required placeholder="Ex: Alimentação, Transporte, Lazer...">
            </div>

            <div class="form-group">
                <label for="categoryColor">
                    <i class="fas fa-palette"></i>
                    Cor (opcional)
                </label>
                <div class="color-picker">
                    <input type="color" id="categoryColor" value="#ff6b35">
                    <div class="color-options">
                        <span class="color-option" style="background: #ff6b35" onclick="selectColor('#ff6b35')"></span>
                        <span class="color-option" style="background: #28a745" onclick="selectColor('#28a745')"></span>
                        <span class="color-option" style="background: #007bff" onclick="selectColor('#007bff')"></span>
                        <span class="color-option" style="background: #ffc107" onclick="selectColor('#ffc107')"></span>
                        <span class="color-option" style="background: #6f42c1" onclick="selectColor('#6f42c1')"></span>
                        <span class="color-option" style="background: #e83e8c" onclick="selectColor('#e83e8c')"></span>
                    </div>
                </div>
            </div>
        </form>

        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" onclick="closeModal()">
                <i class="fas fa-times"></i>
                Cancelar
            </button>
            <button type="submit" form="categoryForm" class="btn btn-primary" id="saveBtn">
                <i class="fas fa-save"></i>
                Salvar
            </button>
        </div>
    </div>
</div>

<!-- Toast para notificações -->
<div class="toast" id="toast">
    <div class="toast-content">
        <i class="toast-icon"></i>
        <span class="toast-message"></span>
    </div>
</div>

<script src="/js/common.js"></script>
<script src="/js/categories.js"></script>
</body>
</html>